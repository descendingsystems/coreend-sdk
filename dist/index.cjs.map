{"version":3,"file":"index.cjs","sources":["../src/helper.ts","../src/index.ts"],"sourcesContent":["export function isBrowser() {\n  return typeof window !== 'undefined';\n}\n","import axios, { AxiosInstance, AxiosRequestHeaders } from 'axios';\nimport { isBrowser } from './helper';\n\ntype SDKInstance = {\n  initialized: boolean;\n  projectId: number;\n  api: AxiosInstance;\n};\n\nconst instance: SDKInstance = {\n  initialized: false,\n  projectId: -1,\n  api: axios.create(),\n};\n\n// General\nexport function initCoreEnd(projectId: number) {\n  if (instance.initialized) throw new Error('[COREEND] SDK has already been initialized');\n\n  instance.projectId = projectId;\n  instance.api = axios.create({\n    baseURL: `https://api.coreend.tech/v1/projects/${projectId}/`,\n  });\n  instance.initialized = true;\n}\n\nfunction enforceIsInitialized() {\n  if (!instance.initialized) throw new Error('[COREEND] SDK has not been initialized');\n}\n\n// Resource Docs\nexport function resourceDocs(resourceId: number) {\n  enforceIsInitialized();\n\n  async function get({\n    id,\n    page,\n    requireAuth,\n  }: { id?: number; page?: number; requireAuth?: boolean } = {}): Promise<\n    | { error: null; items: Record<string, any>[] | Record<string, any> }\n    | { error: any; items: null }\n  > {\n    try {\n      const withId = typeof id === 'number' ? id : '';\n      const withPage = typeof page === 'number' ? `page=${page}` : '';\n      const withQuries = `${withPage}`;\n\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      const result = await instance.api.get(\n        `resources/${resourceId}/docs/${withId}?${withQuries}`,\n        { headers: configHeaders }\n      );\n      const data = result.data as any;\n\n      return { error: null, items: data };\n    } catch (error) {\n      return { error, items: null };\n    }\n  }\n\n  async function create(\n    item: Record<string, any>,\n    requireAuth = false,\n    hCaptchaResponse = ''\n  ): Promise<{ error: null; id: number } | { error: any; id: null }> {\n    try {\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      const withHCaptchaResponse = hCaptchaResponse ? `hcaptchaResponse=${hCaptchaResponse}&` : '';\n      const withQuries = `${withHCaptchaResponse}`;\n\n      const result = await instance.api.post(\n        `resources/${resourceId}/docs?${withQuries}`,\n        { data: item },\n        {\n          headers: configHeaders,\n        }\n      );\n\n      const data = result.data as number;\n\n      return { error: null, id: data };\n    } catch (error) {\n      return { error, id: null };\n    }\n  }\n\n  async function update(\n    item: Record<string, any>,\n    requireAuth = false\n  ): Promise<{ error: null } | { error: any }> {\n    try {\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      await instance.api.put(\n        `resources/${resourceId}/docs`,\n        { data: item },\n        { headers: configHeaders }\n      );\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  async function remove(\n    id: number,\n    requireAuth = false\n  ): Promise<{ error: null } | { error: any }> {\n    try {\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      await instance.api.delete(`resources/${resourceId}/docs/${id}`, { headers: configHeaders });\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  return { get, create, update, remove };\n}\n\n// Authentication\ntype signedInUser = {\n  isSignedIn: boolean;\n  accessToken: string;\n  refreshToken: string;\n  expiresOn: number;\n};\n\ntype Profile = {\n  uid: string;\n  email: string;\n};\n\nconst signedInUser: signedInUser = {\n  isSignedIn: false,\n  accessToken: '',\n  refreshToken: '',\n  expiresOn: 0,\n};\n\nexport function authentication() {\n  enforceIsInitialized();\n\n  const defaultAccessTokenExpirationInMin = 15;\n  const defaultLocalStorageRefreshTokenKey = 'coreend-sdk-authentication-refreshToken';\n\n  if (!signedInUser.isSignedIn && isBrowser()) {\n    const refreshToken = window.localStorage.getItem(defaultLocalStorageRefreshTokenKey);\n\n    if (refreshToken) {\n      signedInUser.refreshToken = refreshToken;\n      signedInUser.isSignedIn = true;\n    }\n  }\n\n  function isSignedIn() {\n    return signedInUser.isSignedIn;\n  }\n\n  async function getAccessToken(): Promise<\n    { error: null; accessToken: string } | { error: any; accessToken: null }\n  > {\n    try {\n      if (!isSignedIn()) throw new Error('Not signed in');\n\n      // Renew access token if close to expiration\n      if (Date.now() >= signedInUser.expiresOn - 1000 * 30) {\n        const renewStatus = await renew();\n\n        if (renewStatus.error) {\n          await logout();\n          throw new Error('Could not renew access token');\n        }\n      }\n\n      return { error: null, accessToken: signedInUser.accessToken };\n    } catch (error) {\n      await logout();\n      return { error, accessToken: null };\n    }\n  }\n\n  async function login(email: string): Promise<{ error: null } | { error: any }> {\n    try {\n      if (isSignedIn()) throw new Error('Already signed in');\n\n      await instance.api.post(`auth/login`, {\n        email,\n      });\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  async function verify(email: string, otp: string): Promise<{ error: null } | { error: any }> {\n    try {\n      if (isSignedIn()) throw new Error('Already signed in');\n\n      const res = await instance.api.post(`auth/verify`, {\n        email,\n        otp,\n      });\n\n      signedInUser.accessToken = res.data.accessToken || '';\n      signedInUser.refreshToken = res.data.refreshToken || '';\n      signedInUser.expiresOn = Date.now() + 60000 * defaultAccessTokenExpirationInMin;\n      signedInUser.isSignedIn = true;\n\n      if (!signedInUser.accessToken || !signedInUser.refreshToken)\n        throw new Error('Could not sign in');\n\n      if (isBrowser())\n        window.localStorage.setItem(defaultLocalStorageRefreshTokenKey, signedInUser.refreshToken);\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  async function profile(): Promise<\n    { error: null; profile: Profile } | { error: any; profile: null }\n  > {\n    try {\n      if (!isSignedIn()) throw new Error('Not signed in');\n      const accessTokenRes = await getAccessToken();\n\n      if (accessTokenRes.error)\n        throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n      const res = await instance.api.get(`auth/profile`, {\n        headers: {\n          Authorization: `Bearer ${accessTokenRes.accessToken}`,\n        },\n      });\n\n      const profile = {\n        uid: res.data.uid || '',\n        email: res.data.email || '',\n      };\n\n      if (!profile.uid || !profile.email) throw new Error('Could not get profile');\n\n      return { error: null, profile };\n    } catch (error) {\n      return { error, profile: null };\n    }\n  }\n\n  async function renew(): Promise<{ error: null } | { error: any }> {\n    try {\n      if (!isSignedIn()) throw new Error('Not signed in');\n\n      const res = await instance.api.post(`auth/renew`, {\n        refreshToken: signedInUser.refreshToken,\n      });\n\n      signedInUser.accessToken = res.data.accessToken;\n      signedInUser.expiresOn = Date.now() + 60000 * defaultAccessTokenExpirationInMin;\n\n      return { error: null };\n    } catch (error) {\n      await logout();\n      return { error };\n    }\n  }\n\n  async function invalidate(): Promise<{ error: null } | { error: any }> {\n    try {\n      if (!isSignedIn()) throw new Error('Not signed in');\n\n      await instance.api.post(`auth/invalidate`, {\n        refreshToken: signedInUser.refreshToken,\n      });\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    } finally {\n      await logout();\n    }\n  }\n\n  async function remove(): Promise<{ error: null } | { error: any }> {\n    try {\n      if (!isSignedIn()) throw new Error('Not signed in');\n      const accessTokenRes = await getAccessToken();\n\n      if (accessTokenRes.error)\n        throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n      await instance.api.delete(`auth/remove`, {\n        headers: {\n          Authorization: `Bearer ${accessTokenRes.accessToken}`,\n        },\n      });\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    } finally {\n      await logout();\n    }\n  }\n\n  async function logout(): Promise<{ error: null } | { error: any }> {\n    try {\n      if (!isSignedIn()) throw new Error('Not signed in');\n\n      if (isBrowser()) window.localStorage.removeItem(defaultLocalStorageRefreshTokenKey);\n\n      signedInUser.isSignedIn = false;\n      signedInUser.accessToken = '';\n      signedInUser.refreshToken = '';\n      signedInUser.expiresOn = 0;\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  return {\n    isSignedIn,\n    getAccessToken,\n    login,\n    verify,\n    profile,\n    renew,\n    invalidate,\n    remove,\n    logout,\n  };\n}\n\n// Storage Files\nexport function storageFiles(storageId: number) {\n  enforceIsInitialized();\n\n  async function get(\n    fileName: string,\n    requireAuth = false\n  ): Promise<{ error: null; url: any } | { error: any; url: null }> {\n    try {\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      const result = await instance.api.get(`storages/${storageId}/files/${fileName}`, {\n        headers: configHeaders,\n      });\n      const data = result.data as { url: string };\n\n      return { error: null, url: data.url };\n    } catch (error) {\n      return { error, url: null };\n    }\n  }\n\n  async function create(\n    file: File,\n    fileName?: string,\n    requireAuth = false,\n    hCaptchaResponse = ''\n  ): Promise<{ error: null } | { error: any }> {\n    try {\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('fileName', fileName || file.name);\n\n      const withHCaptchaResponse = hCaptchaResponse ? `hcaptchaResponse=${hCaptchaResponse}&` : '';\n      const withQuries = `${withHCaptchaResponse}`;\n\n      await instance.api.post(`storages/${storageId}/files?${withQuries}`, formData, {\n        headers: configHeaders,\n      });\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  async function remove(\n    fileName: string,\n    requireAuth = false\n  ): Promise<{ error: null } | { error: any }> {\n    try {\n      const configHeaders: AxiosRequestHeaders = {};\n\n      if (requireAuth) {\n        const authInstance = authentication();\n        const accessTokenRes = await authInstance.getAccessToken();\n\n        if (accessTokenRes.error)\n          throw new Error(`Can not get access token: ${accessTokenRes.error}`);\n\n        configHeaders.Authorization = `Bearer ${accessTokenRes.accessToken}`;\n      }\n\n      await instance.api.delete(`storages/${storageId}/files/${fileName}`, {\n        headers: configHeaders,\n      });\n\n      return { error: null };\n    } catch (error) {\n      return { error };\n    }\n  }\n\n  return { get, create, remove };\n}\n"],"names":["window","instance","initialized","projectId","api","axios","create","enforceIsInitialized","Error","isSignedIn","accessToken","refreshToken","expiresOn","logout","isBrowser","localStorage","removeItem","defaultLocalStorageRefreshTokenKey","signedInUser","Promise","resolve","error","e","reject","renew","_catch","post","res","data","Date","now","defaultAccessTokenExpirationInMin","then","getAccessToken","_temp11","_result5","_temp10","renewStatus","getItem","login","email","verify","otp","setItem","profile","accessTokenRes","get","headers","Authorization","uid","invalidate","_finallyRethrows","_wasThrown","_result7","remove","_wasThrown2","_result8","baseURL","resourceId","_temp3","_ref","id","page","requireAuth","withId","withQuries","configHeaders","result","items","authInstance","authentication","_temp","_temp2","item","hCaptchaResponse","_temp5","_result2","_temp4","update","_temp7","_result3","put","_temp6","_temp9","_result4","_temp8","storageFiles","storageId","fileName","url","_temp12","_temp13","file","_temp15","_result10","formData","FormData","append","name","_temp14","_temp17","_result11","_temp16"],"mappings":"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"}